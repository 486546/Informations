# 最短路

最短路已经是我们的好朋友了。\
众所周知，一共就 `floyed` , `dijsktra` , `已经死了` , `BelmanFord` 这几种。\
不能老是看这些简单的，我们来看看一些不为人知的东西。

---

负环。\
这是个非常搞的东西。\
因为 `dijsktra` 不能判负环！！然后 `SPFA` 他能搞吧，就是容易死掉…………\
所以负环很搞啊……\
一共有 $n$ 个点，如果一个点被松弛(或成为转移)超过了 $n$ 次，那么必然有负环。因为正常来说一个图不可能被遍历超过 $n$ 次。\
既然如此，负环的复杂度很可能会退化成 $O(nm)$ 。

---

现在来看看一堆鬼最短路：

- 01最短路
- 带权最短路
- 次短路
- 求最小环

前三个为简单应用，这里着重看一下最小环。

---

题目很简单，有 $n$ 个点， $m$ 条边，怎么求最小环？\
先来看个标准错误答案。
## Tarjan
好，为什么我是标准错误答案呢？？\
事实上，拓扑等一系列找环的过程全都是错误答案。\
WHY????原因很简单，你找到环了，怎么确保是最小的？？\
Tarjan找到的确实是环，但是他只是广义上的环，不能确保是最小的。

---

那正解是什么呢？？
## Floyd
啥？？复杂度最高的倒是正解了。\
事实上，他也不能确保最小环，但是我们可以改造一下。\
我们从边上出手。假设我们找到一条边。那么这个时候我们如果把这条边删去跑个最短路，发现跑的回来，那么就说明这条边在环上，否则就回不来了。\
那么这样我们就可以得到 $O(n^3)$ 的超级做法。\
发现枚举每一条边是这个算法的瓶颈，怎么优化呢？
这个时候就要用复杂度很好的 `floyd` 了。\
我们假设有个点 $k$ ，有个进入和离开 $k$ 的边。
